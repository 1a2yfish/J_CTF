# CTF平台端对端测试指南

## 前置条件

1. **数据库已初始化**
   - 执行 `Init.sql` 创建数据库结构
   - 执行 `test-data.sql` 插入测试数据

2. **后端服务运行**
   - 后端运行在 `http://localhost:8081`
   - 确保后端服务正常启动

3. **前端服务运行**
   - 前端运行在 `http://localhost:5173` (Vite默认端口)
   - 执行 `cd frontend && npm run dev`

## 测试账号

### 管理员账号
- **账号**: `admin`
- **密码**: `aaa1`

### 普通用户账号
- **账号**: `testuser1` 到 `testuser5`
- **密码**: `123456`

## 端对端测试流程

### 1. 用户注册测试

1. 访问 `http://localhost:5173/register`
2. 填写注册信息：
   - 用户名: `newuser`
   - 密码: `123456`
   - 邮箱: `newuser@example.com`
   - 手机号: `13800138010`
   - 性别: `M` 或 `F`
   - 单位/学校: `测试大学`
3. 点击"注册"按钮
4. **预期结果**: 注册成功，跳转到登录页面

### 2. 用户登录测试

1. 访问 `http://localhost:5173/login`
2. 使用测试账号登录：
   - 账号: `testuser1`
   - 密码: `123456`
3. 点击"登录"按钮
4. **预期结果**: 
   - 登录成功
   - 跳转到仪表盘页面 (`/dashboard`)
   - 显示用户信息

### 3. 仪表盘测试

1. 登录后自动进入仪表盘
2. 检查以下内容：
   - 统计数据卡片（参与竞赛、解决题目、总积分、团队排名）
   - 快速导航卡片（竞赛列表、团队管理、个人中心）
   - 近期竞赛列表
3. **预期结果**: 
   - 所有数据正常显示
   - 快速导航卡片可点击跳转
   - 近期竞赛列表可点击查看详情

### 4. 竞赛列表测试

1. 点击侧边栏"竞赛列表"或快速导航中的"竞赛列表"
2. 检查以下内容：
   - 竞赛列表正常显示
   - 搜索功能（如果有）
   - 普通用户看不到"创建新竞赛"按钮（管理员才显示）
3. 点击某个竞赛卡片
4. **预期结果**: 
   - 跳转到竞赛详情页面
   - 显示竞赛详细信息

### 5. 竞赛详情测试

1. 在竞赛详情页面检查：
   - 竞赛基本信息（标题、描述、时间、参与人数）
   - 题目列表（包含分类、难度、分数）
   - 题目筛选功能（按分类、难度筛选）
   - 排行榜
   - 团队信息
2. 测试题目功能：
   - 点击"查看提示"按钮
   - 输入Flag并提交
3. **预期结果**: 
   - 所有信息正常显示
   - 提示对话框正常弹出
   - Flag提交后显示正确/错误提示
   - 已解决的题目显示已解决标识

### 6. 团队管理测试

1. 点击侧边栏"团队管理"
2. 检查团队列表
3. 在竞赛详情页面：
   - 点击"加入/创建团队"按钮
   - 创建新团队或加入现有团队
4. **预期结果**: 
   - 团队列表正常显示
   - 可以成功创建或加入团队
   - 团队信息正确显示

### 7. 个人中心测试

1. 点击侧边栏"个人中心"或快速导航中的"个人中心"
2. 检查个人信息显示
3. 修改个人信息并保存
4. **预期结果**: 
   - 个人信息正常显示
   - 可以成功更新个人信息

### 8. 登出功能测试

1. 点击侧边栏底部的"退出登录"按钮
2. 或点击右上角用户头像下拉菜单中的"退出登录"
3. **预期结果**: 
   - 成功登出
   - 跳转到登录页面
   - 清除本地存储的用户信息

### 9. 管理员功能测试（使用admin账号）

1. 使用管理员账号登录 (`admin` / `aaa1`)
2. 检查管理员专属功能：
   - 竞赛列表页面显示"创建新竞赛"按钮
   - 可以创建新竞赛
3. **预期结果**: 
   - 管理员可以看到创建竞赛按钮
   - 可以成功创建竞赛

### 10. 路由守卫测试

1. 未登录状态下直接访问 `/dashboard`
2. **预期结果**: 自动跳转到登录页面
3. 登录后访问 `/login` 或 `/register`
4. **预期结果**: 自动跳转到仪表盘

## 常见问题排查

### 前端无法启动
1. 检查 `node_modules` 是否已安装：`cd frontend && npm install`
2. 检查端口是否被占用
3. 查看控制台错误信息

### 后端连接失败
1. 确认后端服务运行在 `http://localhost:8081`
2. 检查 `vite.config.js` 中的代理配置
3. 查看浏览器控制台的网络请求错误

### 登录失败
1. 确认数据库中有测试用户数据
2. 检查密码加密是否正确
3. 查看后端日志确认请求是否到达

### 数据不显示
1. 确认数据库已初始化并插入了测试数据
2. 检查API响应格式是否正确
3. 查看浏览器控制台的错误信息

## 测试检查清单

- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 仪表盘数据正常显示
- [ ] 竞赛列表正常显示
- [ ] 竞赛详情页面正常显示
- [ ] 题目列表和筛选功能正常
- [ ] Flag提交功能正常
- [ ] 提示查看功能正常
- [ ] 团队管理功能正常
- [ ] 个人中心功能正常
- [ ] 登出功能正常
- [ ] 路由守卫正常工作
- [ ] 管理员功能正常（创建竞赛）
- [ ] 普通用户看不到管理员功能

## 测试完成标准

所有功能测试通过，无严重错误，平台可以正常使用。

